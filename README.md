# üß† SmartHead Feedback System

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –Ω–∞ **Laravel 12 (PHP 8.4)**.  
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π **–≤–∏–¥–∂–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏**, API –¥–ª—è –∑–∞—è–≤–æ–∫ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–∞–º–∏.

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü—É–±–ª–∏—á–Ω—ã–π –≤–∏–¥–∂–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏** ‚Äî –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `<iframe>`  
  ‚Üí `/widget`
- **REST API –¥–ª—è –∑–∞—è–≤–æ–∫**
  - `POST /api/tickets` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
  - `GET /api/tickets/statistics` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–∫–µ—Ç–∞–º
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å**
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç–∏–∫–µ—Ç–æ–≤ (`PATCH /admin/tickets/{id}/status`)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–æ–ª–∏** —á–µ—Ä–µ–∑ `spatie/laravel-permission`
- **Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**
- **Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–µ (PHP + Nginx + MySQL)**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥—ã** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1Ô∏è‚É£ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (SOLID)
–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —É—Ä–æ–≤–Ω–∏:
- **Controllers** ‚Äî —Ç–æ–ª—å–∫–æ HTTP-–ª–æ–≥–∏–∫–∞  
- **Services** ‚Äî –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ [CQRS service pattern](https://ru.wikipedia.org/wiki/CQRS)
- **Repositories** ‚Äî —Å–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º  
- **Resources** ‚Äî API-–æ—Ç–≤–µ—Ç—ã  
- **Requests** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  

–¢–∞–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–≤—ã—à–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å.

---

### 2Ô∏è‚É£ Laravel –∫–∞–∫ —è–¥—Ä–æ
Laravel –≤—ã–±—Ä–∞–Ω –±–ª–∞–≥–æ–¥–∞—Ä—è:
- –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ–º—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É  
- –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º—É DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É  
- –ø—Ä–æ—Å—Ç–æ–º—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏  
- –º–æ—â–Ω–æ–º—É ORM (Eloquent)  
- —É–¥–æ–±–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏  
- –≥–æ—Ç–æ–≤—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è  

---

### 3Ô∏è‚É£ Spatie Laravel Permission
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [spatie/laravel-permission](https://github.com/spatie/laravel-permission)  
–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞.

- –†–æ–ª–∏: `manager`, `admin`
- Middleware: `role`, `permission`, `role_or_permission`

> üîí –ü–æ–≤—ã—à–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π.

---

### 4Ô∏è‚É£ Spatie Media Library
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [spatie/laravel-medialibrary](https://github.com/spatie/laravel-medialibrary)  
–¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤, –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã—Ö –∫ —Ç–∏–∫–µ—Ç–∞–º.

> üìé –£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Ñ–∞–π–ª–∞–º–∏ —á–µ—Ä–µ–∑ Eloquent, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ—Å–∞–π–∑ –∏ —É–¥–∞–ª–µ–Ω–∏–µ.

---

### 5Ô∏è‚É£ Swagger (L5 Swagger)
–î–æ–±–∞–≤–ª–µ–Ω–∞ Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è REST API.  
–î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8000/api/documentation](http://localhost:8000/api/documentation)

> üßæ –£–ø—Ä–æ—â–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é API —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.

---

### 6Ô∏è‚É£ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–æ–∫
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ ‚Äî –Ω–µ –±–æ–ª–µ–µ **–æ–¥–Ω–æ–π –∑–∞—è–≤–∫–∏ –≤ —Å—É—Ç–∫–∏**
—Å –æ–¥–Ω–æ–≥–æ `email` –∏–ª–∏ `phone`.  
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Å–µ—Ä–≤–∏—Å–µ `TicketCommandService`.

---

### 7Ô∏è‚É£ Docker-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

**–°–µ—Ä–≤–∏—Å—ã:**
- `app` ‚Äî PHP 8.4 FPM + Composer  
- `mysql` ‚Äî MySQL 8.0  
- `nginx` ‚Äî –≤–µ–±-—Å–µ—Ä–≤–µ—Ä  

**–§–∞–π–ª—ã:**
```
Dockerfile
docker-compose.yml
docker/nginx/default.conf
docker/entrypoint.sh
```

**entrypoint.sh:**
```bash
if [ ! -f .env ]; then cp .env.example .env; fi
php artisan key:generate
php artisan migrate --seed --force
exec php-fpm
```

üì¶ –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
- —Å–æ–∑–¥–∞—ë—Ç—Å—è `.env`
- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–ª—é—á
- –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥—ã
- —Å–æ–∑–¥–∞—ë—Ç—Å—è `admin@example.com / password`

---

## üß∞ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| PHP | 8.4    | –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ |
| Laravel | 12.x   | –ë—ç–∫–µ–Ω–¥-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| MySQL | 8.0    | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| Nginx | latest | –í–µ–±-—Å–µ—Ä–≤–µ—Ä |
| Composer | 2.x    | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ |
| Spatie Media Library | ^11.15 | –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ |
| Spatie Permission | ^6.21  | –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ |
| Swagger (L5) | latest | API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| PHPUnit | ^10    | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
git clone https://github.com/yourname/smartheadapp.git
cd smartheadapp
docker compose up -d --build
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- Laravel –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É [http://localhost:8000](http://localhost:8000)
- Swagger ‚Äî [http://localhost:8000/api/documentation](http://localhost:8000/api/documentation)

---

## üîë –î–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```
Email: admin@example.com
Password: password
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ unit/feature-—Ç–µ—Å—Ç–æ–≤:

```bash
docker compose exec app php artisan test
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
 ‚îú‚îÄ‚îÄ Http/
 ‚îÇ   ‚îú‚îÄ‚îÄ Controllers/
 ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Api/
 ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Admin/
 ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Swagger/
 ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WidgetController.php
 ‚îÇ   ‚îú‚îÄ‚îÄ Requests/
 ‚îÇ   ‚îú‚îÄ‚îÄ Resources/
 ‚îÇ   ‚îî‚îÄ‚îÄ Middleware/
 ‚îú‚îÄ‚îÄ Services/
 ‚îú‚îÄ‚îÄ Repositories/
 ‚îú‚îÄ‚îÄ Models/
 ‚îî‚îÄ‚îÄ Providers/
```

---

## üß± –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- –ö–æ–¥ –æ—Ñ–æ—Ä–º–ª–µ–Ω –ø–æ **PSR-12** (—á–µ—Ä–µ–∑ Laravel Pint)
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ **Form Requests**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —à–∞–±–ª–æ–Ω **Repository + Service**
- –ü–æ–∫—Ä—ã—Ç **Feature-—Ç–µ—Å—Ç–∞–º–∏**: API, –≤–∏–¥–∂–µ—Ç, –∞–¥–º–∏–Ω–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Docker Entrypoint

---

## üßæ How to Deploy (Production)

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞  
2. –°–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
   ```bash
   docker compose -f docker-compose.prod.yml up -d --build
   ```
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
   ```bash
   docker compose exec app php artisan migrate --force
   ```
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–∞ `https://your-domain.com`

---

